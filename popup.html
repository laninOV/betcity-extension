<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ê–Ω–∞–ª–∏–∑ —Ç–µ–Ω–Ω–∏—Å–Ω—ã—Ö –º–∞—Ç—á–µ–π</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="popup.css" />
</head>
<body>
  <div class="container">
    <header>
      <h1>–ê–Ω–∞–ª–∏–∑ –º–∞—Ç—á–µ–π</h1>
      <button id="analyzeBtn" class="analyze-btn" aria-label="–ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑">–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
    </header>

    <div id="loading" class="loading hidden" role="status" aria-live="polite">
      <div class="spinner" aria-hidden="true"></div>
      –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º...
    </div>

    <div id="error" class="error hidden" role="alert" aria-live="assertive"><p></p></div>

    <main id="results" class="results hidden" tabindex="-1">
      <div class="top-info">
        <div class="confidence" aria-label="–£—Ä–æ–≤–µ–Ω—å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏">
          <span id="confidenceIcon" aria-hidden="true"></span> 
          <span id="confidenceText"></span>
        </div>
        <div class="favorite" aria-label="–§–∞–≤–æ—Ä–∏—Ç –º–∞—Ç—á–∞">
          <strong>–§–∞–≤–æ—Ä–∏—Ç:</strong> <span id="favoriteText"></span>
        </div>
      </div>

      <section aria-labelledby="mainStatsTitle" class="main-stats-block">
        <table class="main-table" aria-describedby="mainStatsDesc" role="table">
          <thead>
            <tr>
              <th scope="col">–ò–≥—Ä–æ–∫</th>
              <th scope="col">S</th>
              <th scope="col">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å</th>
              <th scope="col">H2H</th>
              <th scope="col">–°—Ç–∞–±.</th>
            </tr>
          </thead>
          <tbody id="mainTableBody"></tbody>
        </table>
      </section>

      <section id="h2hVizSection" class="match-viz-h2h hidden" aria-label="–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –æ—á–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á">
        <div class="h2h-title">–û—á–Ω—ã–µ –≤—Å—Ç—Ä–µ—á–∏</div>
        <div class="match-viz-row">
          <span class="h2h-label">H2H (<span id="h2hFavName"></span>):</span>
          <span id="h2hViz" class="dots-viz"></span>
        </div>
      </section>

      <div class="stats-grid">
        <section class="stats-card" aria-labelledby="statsTitle">
          <h3 id="statsTitle">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
          <table class="mini-table" aria-describedby="statsDesc">
            <thead>
              <tr>
                <th scope="col">–ü–æ–∫–∞–∑–∞—Ç–µ–ª—å</th>
                <th scope="col" id="statName1"></th>
                <th scope="col" id="statName2"></th>
              </tr>
            </thead>
            <tbody>
              <tr><td>S‚ÇÇ</td><td id="s2Player1"></td><td id="s2Player2"></td></tr>
              <tr><td>S‚ÇÖ</td><td id="s5Player1"></td><td id="s5Player2"></td></tr>
              <tr><td>–°—É—Ö–∏–µ –ø–æ–±–µ–¥—ã</td><td id="dryWins1"></td><td id="dryWins2"></td></tr>
              <tr><td>–°—É—Ö–∏–µ –ø–æ—Ä–∞–∂–µ–Ω–∏—è</td><td id="dryLosses1"></td><td id="dryLosses2"></td></tr>
            </tbody>
          </table>
        </section>

        <section class="stats-card" aria-labelledby="setsTitle">
          <h3 id="setsTitle">üéØ –ü–æ–±–µ–¥—ã –≤ —Å–µ—Ç–∞—Ö</h3>
          <table class="mini-table" aria-describedby="setsDesc">
            <thead>
              <tr>
                <th scope="col">–°–µ—Ç</th>
                <th scope="col" id="p1Sets"></th>
                <th scope="col" id="p2Sets"></th>
              </tr>
            </thead>
            <tbody id="setsTableBody"></tbody>
          </table>
        </section>

        <section class="stats-card" aria-labelledby="tb35Title">
          <h3 id="tb35Title" style="color:#a8b7ff;">‚è≥ –¢–ë 3.5 —Å–µ—Ç–æ–≤</h3>
          <table class="mini-table" style="font-size:11px; color:#ccc;">
            <thead>
              <tr>
                <th scope="col">–ò—Å—Ö–æ–¥</th>
                <th scope="col">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å</th>
              </tr>
            </thead>
            <tbody id="setsOver35Body"></tbody>
          </table>
        </section>

        <section class="stats-card" aria-labelledby="lastResultsTitle">
          <h3 id="lastResultsTitle">üé≤ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è</h3>
          <div class="match-visualization">
            <div class="match-viz-row">
              <span id="vizNameFav" class="player-name-viz"></span>
              <span id="matchVizFav" class="dots-viz"></span>
            </div>
            <div class="match-viz-row">
              <span id="vizNameUnd" class="player-name-viz"></span>
              <span id="matchVizUnd" class="dots-viz"></span>
            </div>
          </div>
          <div class="legend" aria-label="–õ–µ–≥–µ–Ω–¥–∞">
            <span class="legend-item">üü¢ ‚Äì –ø–æ–±–µ–¥–∞</span>
            <span class="legend-item">üî¥ ‚Äì –ø–æ—Ä–∞–∂–µ–Ω–∏–µ</span>
          </div>
        </section>

        <section class="stats-card" aria-labelledby="scoreProbsTitle">
          <h3 id="scoreProbsTitle">üîÆ –°—á–µ—Ç–∞ (–æ–±—â–∏–µ)</h3>
          <table class="mini-table" aria-label="–¢–∞–±–ª–∏—Ü–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π –∏—Ç–æ–≥–æ–≤—ã—Ö —Å—á–µ—Ç–æ–≤">
            <thead>
              <tr>
                <th scope="col">–°—á–µ—Ç</th>
                <th scope="col">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å</th>
              </tr>
            </thead>
            <tbody id="scoreTableBody"></tbody>
          </table>
        </section>

        <section class="stats-card" aria-labelledby="btProbsTitle">
          <h3 id="btProbsTitle">üî¢ –ë—Ä—ç–¥–ª–∏‚Äì–¢–µ—Ä—Ä–∏</h3>
          <table class="mini-table" aria-label="–¢–∞–±–ª–∏—Ü–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π –ø–æ –º–æ–¥–µ–ª–∏ –ë—Ä—ç–¥–ª–∏‚Äì–¢–µ—Ä—Ä–∏">
            <thead>
              <tr>
                <th scope="col">–°—á–µ—Ç</th>
                <th scope="col">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å</th>
              </tr>
            </thead>
            <tbody id="btScoreTableBody"></tbody>
          </table>
        </section>

        <section class="stats-card" aria-labelledby="setsCountTitle">
          <h3 id="setsCountTitle" style="color:#a8b7ff;">‚è≥ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ—Ç–æ–≤</h3>
          <table class="mini-table" style="font-size:11px; color:#ccc;">
            <thead>
              <tr>
                <th scope="col">–°–µ—Ç–æ–≤</th>
                <th scope="col">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å</th>
              </tr>
            </thead>
            <tbody id="setsDistTableBody"></tbody>
          </table>
        </section>

        <section class="stats-card" id="player-form-section" aria-labelledby="formChartTitle">
          <h3 id="formChartTitle" style="color:#a8b7ff;">üìà –ì—Ä–∞—Ñ–∏–∫ —Ñ–æ—Ä–º—ã</h3>
          <canvas id="formChart" role="img" aria-label="–ì—Ä–∞—Ñ–∏–∫ —Ñ–æ—Ä–º—ã –∏–≥—Ä–æ–∫–æ–≤"></canvas>
        </section>
      </div>
    </main>
  </div>

  <script src="chart.js"></script>
  <script src="popup.js"></script>
</body>
</html>
