<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ê–Ω–∞–ª–∏–∑ —Ç–µ–Ω–Ω–∏—Å–Ω—ã—Ö –º–∞—Ç—á–µ–π</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="popup.css" />
</head>
<body>
  <div class="container">
    <header>
      <h1>–ê–Ω–∞–ª–∏–∑ –º–∞—Ç—á–µ–π</h1>
      <button id="analyzeBtn" class="analyze-btn" aria-label="–ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑">–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
    </header>

    <div id="loading" class="loading hidden" role="status" aria-live="polite">
      <div class="spinner" aria-hidden="true"></div>
      –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º...
    </div>

    <div id="error" class="error hidden" role="alert" aria-live="assertive"><p></p></div>

    <main id="results" class="results hidden" tabindex="-1">
      <div class="top-info">
        <div class="confidence" aria-label="–£—Ä–æ–≤–µ–Ω—å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏">
          <span id="confidenceIcon" aria-hidden="true"></span> 
          <span id="confidenceText"></span>
        </div>
        <div class="favorite" aria-label="–§–∞–≤–æ—Ä–∏—Ç –º–∞—Ç—á–∞">
          <strong>–§–∞–≤–æ—Ä–∏—Ç:</strong> <span id="favoriteText"></span>
        </div>
      </div>

      <section aria-labelledby="mainStatsTitle" class="main-stats-block">
        <h2 id="mainStatsTitle" class="visually-hidden">–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∏–≥—Ä–æ–∫–æ–≤</h2>
        <table class="main-table" aria-describedby="mainStatsDesc" role="table">
          <caption id="mainStatsDesc">–û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤: —Å–∏–ª–∞, –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ–±–µ–¥—ã, –æ—á–Ω—ã–µ –≤—Å—Ç—Ä–µ—á–∏ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å</caption>
          <thead>
            <tr>
              <th scope="col">–ò–≥—Ä–æ–∫</th>
              <th scope="col">S</th>
              <th scope="col">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å</th>
              <th scope="col">H2H</th>
              <th scope="col">–°—Ç–∞–±.</th>
            </tr>
          </thead>
          <tbody id="mainTableBody"></tbody>
        </table>
      </section>

      <section id="h2hVizSection" class="match-viz-h2h hidden" aria-label="–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –æ—á–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á">
        <h3 class="h2h-title">–û—á–Ω—ã–µ –≤—Å—Ç—Ä–µ—á–∏</h3>
        <div class="match-viz-row">
          <span class="h2h-label">H2H (<span id="h2hFavName"></span>):</span>
          <span id="h2hViz" class="dots-viz"></span>
        </div>
      </section>

      <div class="stats-grid">
        <section class="stats-card" aria-labelledby="statsTitle">
          <h3 id="statsTitle">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤</h3>
          <table class="mini-table" aria-describedby="statsDesc">
            <caption id="statsDesc">–ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ S‚ÇÇ, S‚ÇÖ, —Å—É—Ö–∏–µ –ø–æ–±–µ–¥—ã –∏ –ø–æ—Ä–∞–∂–µ–Ω–∏—è, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –æ—á–Ω—ã–º –≤—Å—Ç—Ä–µ—á–∞–º</caption>
            <thead>
              <tr>
                <th scope="col">–ü–æ–∫–∞–∑–∞—Ç–µ–ª—å</th>
                <th scope="col" id="statName1"></th>
                <th scope="col" id="statName2"></th>
              </tr>
            </thead>
            <tbody>
              <tr><td>S‚ÇÇ</td><td id="s2Player1"></td><td id="s2Player2"></td></tr>
              <tr><td>S‚ÇÖ</td><td id="s5Player1"></td><td id="s5Player2"></td></tr>
              <tr><td>–°—É—Ö–∏–µ –ø–æ–±–µ–¥—ã</td><td id="dryWins1"></td><td id="dryWins2"></td></tr>
              <tr><td>–°—É—Ö–∏–µ –ø–æ—Ä–∞–∂–µ–Ω–∏—è</td><td id="dryLosses1"></td><td id="dryLosses2"></td></tr>
              <tr><td>H2H —Å—É—Ö–∏–µ –ø–æ—Ä–∞–∂.</td><td id="h2hDryLoss1"></td><td id="h2hDryLoss2"></td></tr>
            </tbody>
          </table>
        </section>

        <section class="stats-card" aria-labelledby="setsTitle">
          <h3 id="setsTitle">üéØ –ü–æ–±–µ–¥—ã –≤ —Å–µ—Ç–∞—Ö</h3>
          <table class="mini-table" aria-describedby="setsDesc">
            <caption id="setsDesc">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–∏–≥—Ä–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–æ–∏–≥—Ä–∞–Ω–Ω—ã—Ö —Å–µ—Ç–æ–≤ –ø–æ –Ω–æ–º–µ—Ä–∞–º</caption>
            <thead>
              <tr>
                <th scope="col">–°–µ—Ç</th>
                <th scope="col" id="p1Sets"></th>
                <th scope="col" id="p2Sets"></th>
              </tr>
            </thead>
            <tbody id="setsTableBody"></tbody>
            <tfoot>
              <tr>
                <td>–ò—Ç–æ–≥–æ</td>
                <td id="totalSets1"></td>
                <td id="totalSets2"></td>
              </tr>
            </tfoot>
          </table>
        </section>

        <section class="stats-card" aria-labelledby="tb35Title" style="background:#272e59;">
          <h3 id="tb35Title" style="color:#a8b7ff;">
            ‚è≥ –¢–ë <span style="color:#28a745;">3.5</span> –ø–æ —Å–µ—Ç–∞–º üéæ
          </h3>
          <table class="mini-table" style="font-size:15px; color:#ccc;">
            <thead>
              <tr>
                <th scope="col" style="width:60%;">–ò—Å—Ö–æ–¥</th>
                <th scope="col">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å</th>
              </tr>
            </thead>
            <tbody id="setsOver35Body"></tbody>
          </table>
          <p id="setsOver35Explain" style="font-size:12px; margin-top:5px; color:#a0a8c0; text-align:left;"></p>
        </section>

        <section class="stats-card" aria-labelledby="setsCountTitle" style="background:#2c3461;">
          <h3 id="setsCountTitle" style="color:#a8b7ff;">‚è≥ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–µ—Ç–æ–≤</h3>
          <table class="mini-table" style="font-size:14px; color:#ccc;">
            <thead>
              <tr>
                <th scope="col">–°–µ—Ç–æ–≤ –≤ –º–∞—Ç—á–µ</th>
                <th scope="col">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å</th>
              </tr>
            </thead>
            <tbody id="setsDistTableBody"></tbody>
          </table>
        </section>

        <section class="stats-card" aria-labelledby="lastResultsTitle">
          <h3 id="lastResultsTitle">üé≤ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</h3>
          <div class="match-visualization">
            <div class="match-viz-row">
              <span id="vizNameFav" class="player-name-viz"></span>
              <span id="matchVizFav" class="dots-viz"></span>
            </div>
            <div class="match-viz-row">
              <span id="vizNameUnd" class="player-name-viz"></span>
              <span id="matchVizUnd" class="dots-viz"></span>
            </div>
          </div>
          <div class="legend" aria-label="–õ–µ–≥–µ–Ω–¥–∞">
            <span class="legend-item" style="color: var(--green);">üü¢ ‚Äì –ø–æ–±–µ–¥–∞</span>
            <span class="legend-item" style="color: var(--red);">üî¥ ‚Äì –ø–æ—Ä–∞–∂–µ–Ω–∏–µ</span>
          </div>
        </section>

        <section class="stats-card" aria-labelledby="scoreProbsTitle">
          <h3 id="scoreProbsTitle">üîÆ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ —Å—á–µ—Ç–æ–≤ (–æ–±—â–∏–µ)</h3>
          <table class="mini-table" aria-describedby="scoreProbsDesc" aria-label="–¢–∞–±–ª–∏—Ü–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π –∏—Ç–æ–≥–æ–≤—ã—Ö —Å—á–µ—Ç–æ–≤">
            <caption id="scoreProbsDesc">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏—Ç–æ–≥–æ–≤—ã—Ö —Å—á–µ—Ç–æ–≤ –ø–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π –º–æ–¥–µ–ª–∏</caption>
            <thead>
              <tr>
                <th scope="col">–°—á–µ—Ç</th><th scope="col">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å</th>
              </tr>
            </thead>
            <tbody id="scoreTableBody"></tbody>
          </table>
        </section>

        <section class="stats-card" aria-labelledby="btProbsTitle">
          <h3 id="btProbsTitle">üî¢ –°—á–µ—Ç –ø–æ –ë—Ä—ç–¥–ª–∏‚Äì–¢–µ—Ä—Ä–∏</h3>
          <table class="mini-table" aria-describedby="btProbsDesc" aria-label="–¢–∞–±–ª–∏—Ü–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π –∏—Ç–æ–≥–æ–≤—ã—Ö —Å—á–µ—Ç–æ–≤ –ø–æ –º–æ–¥–µ–ª–∏ –ë—Ä—ç–¥–ª–∏‚Äì–¢–µ—Ä—Ä–∏">
            <caption id="btProbsDesc">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –∏—Ç–æ–≥–æ–≤—ã—Ö —Å—á–µ—Ç–æ–≤, —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–µ –ø–æ –º–æ–¥–µ–ª–∏ –ë—Ä—ç–¥–ª–∏‚Äì–¢–µ—Ä—Ä–∏ —Å –≤–µ—Å–∞–º–∏ —Å–µ—Ç–æ–≤</caption>
            <thead>
              <tr>
                <th scope="col">–°—á–µ—Ç</th><th scope="col">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å</th>
              </tr>
            </thead>
            <tbody id="btScoreTableBody"></tbody>
          </table>
          <p style="font-size:12px; color:#a0a8c0;">
            –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏–ª–∞ –Ω–∞ —Å–µ—Ç–µ —Å —É—á–µ—Ç–æ–º —Ä–∞–∑–Ω–∏—Ü—ã –æ—á–∫–æ–≤ (–º–æ–¥–µ–ª—å –ë—Ä—ç–¥–ª–∏‚Äì–¢–µ—Ä—Ä–∏)
          </p>
        </section>

        <section class="stats-card" id="player-form-section" aria-labelledby="formChartTitle" style="background:#272e59;">
          <h3 id="formChartTitle" style="color:#a8b7ff;">üìà –ì—Ä–∞—Ñ–∏–∫ —Ñ–æ—Ä–º—ã –∏–≥—Ä–æ–∫–æ–≤</h3>
          <canvas id="formChart" role="img" aria-label="–ì—Ä–∞—Ñ–∏–∫ —Ñ–æ—Ä–º—ã –∏–≥—Ä–æ–∫–æ–≤"></canvas>
        </section>
      </div>
    </main>
  </div>

  <script src="chart.js"></script>
  <script src="popup.js"></script>
</body>
</html>
